<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="css/reg.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/log.css">
</head>
<body>
    <!-- Кнопка для открытия модальной формы входа -->
<button onclick="document.getElementById('id01').style.display='block'">Ввод</button>

<!-- Модальный -->
<div id="id01" class="modal">
  <span onclick="document.getElementById('id01').style.display='none'"
class="close" title="Закрыть модальный">&times;</span>

  <!-- Модальный контент -->
  <form class="modal-content animate" action="home.html">
    <div class="imgcontainer">
    </div>

    <div class="container">
      <label for="uname"><b>Пользователь</b></label>
      <input type="text" placeholder="Введите имя" name="uname" required>

      <label for="psw"><b>Пароль</b></label>
      <input type="password" placeholder="Введите пароль" name="psw" required>

      <button type="submit">Ввод</button>
      <label>
        <input type="checkbox" checked="checked" name="remember"> Запомнить меня
      </label>
    </div>

    <div class="container" style="background-color:#000000">
      <button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn">Отменить</button>
      <span class="psw">Забыли <a href="#">пароль?</a></span>
    </div>
  </form>
</div>
        </form>
        <p id="error-message" style="color: red; display: none;">Please enter a valid username!</p>
    </div>

    <script>
        // Функция для проверки имени пользователя
        function isValidUsername(username) {
            // Проверка на пустоту и минимум один символ
            return username && username.trim().length > 0;
        }

        // Проверяем, если пользователь уже зарегистрирован
        const username = localStorage.getItem("username");

        if (username && isValidUsername(username)) {
            // Если имя пользователя в localStorage и оно валидное, перенаправляем на страницу музыки
            window.location.href = "home.html";
        }

        // Логика для регистрации
        const form = document.getElementById("login-form");
        form.addEventListener("submit", function(event) {
            event.preventDefault();
            const usernameInput = document.getElementById("username").value;

            if (isValidUsername(usernameInput)) {
                // Сохраняем имя пользователя в localStorage
                localStorage.setItem("username", usernameInput);
                // Перенаправляем на страницу музыки
                window.location.href = "home.html";
            } else {
                // Показываем ошибку, если не введено валидное имя
                document.getElementById("error-message").style.display = "block";
            }
        });
    </script>

</body>
</html>
