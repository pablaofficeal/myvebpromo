<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/spotify.css">
    <title>Music Page</title>
</head>
<body>
    <nav>
        <ul>
            <li><a href="home.html">Home</a></li>
            <li><a href="music.html">Music Portfolio</a></li>
            <li><a href="art.html">Art Portfolio</a></li>
            <li><a href="web.html">Web Projects</a></li>
            <li><a href="mylittletiktok.html">My TikTok</a></li>
            <li><a href="profile.html">My Profile</a></li>
        </ul>
    </nav>

    <div class="album-info">
        <img src="img/3ebd0a718ef23b02bd19681de0815096.jpg" alt="Album Cover" class="album-cover">
        <div class="album-details">
            <h1 class="album-title">Последний патрон 1</h1>
            <h1 class="album-artist">Исполнитель: Pabla officeal</h1>
            <h1 class="album-producer">Продюсер: Миша Томатов, DJ Pabla, Pabla officeal</h1>
            <h4 class="timing">Хронометраж (14 мин 31 сек)</h4>
        </div>
    </div>

    <ul class="track-list">
        <li class="track-item">
            <div class="track-player">
                <audio controls data-track-name="Снова воскресенье">
                    <source src="audio/Project_61 4.mp3" type="audio/mp3">
                </audio>
            </div>
            <div class="track-info">Artist: Pabla officeal | Producer: Миша Томатов, DJ Pabla, Pabla officeal</div>
            <div class="track-name">Снова воскресенье</div>
        </li>
        <li class="track-item">
            <div class="track-player">
                <audio controls data-track-name="Вижу как Chill">
                    <source src="audio/Project_6.mp3" type="audio/mp3">
                </audio>
            </div>
            <div class="track-info">Artist: Pabla officeal | Producer: Миша Томатов, DJ Pabla, Pabla officeal</div>
            <div class="track-name">Вижу как Chill</div>
        </li>
        <li class="track-item">
            <div class="track-player">
                <audio controls data-track-name="Мы накурились в лифте">
                    <source src="audio/Project_41 2.mp3" type="audio/mp3">
                </audio>
            </div>
            <div class="track-info">Artist: Pabla officeal | Producer: Миша Томатов, DJ Pabla, Pabla officeal</div>
            <div class="track-name">Мы накурились в лифте</div>
        </li>
    </ul>  
        <ul class="track-list">
            <!-- Track 1 -->
            <li class="track-item">
                <div class="track-player">
                    <audio controls>
                        <source src="audio/Project_34.mp3" type="audio/mp3">
                    </audio>
                                
                    </div>
                    <div class="track-info">Artist: Pabla officeal | Producer: Миша Томатов,DJ Pabla,Pabla officeal</div>
                    <div class="track-name">Я родом из улице</div>
                </li>
                    <ul class="track-list">
                        <!-- Track 2 -->
                        <li class="track-item">
                            <div class="track-player">
                                <audio controls>
                                     <source src="audio/Project_52.mp3" type="audio/mp3">
                                </audio>
                                    
                                </div>
                                <div class="track-info">Artist: Pabla officeal | Producer: Миша Томатов,DJ Pabla,Pabla officeal</div>
                                <div class="track-name">Ты ждёшь Payday</div>
                            </li>
                    <ul class="track-list">
                                <!-- Track 3 -->
                                <li class="track-item">
                                    <div class="track-player">
                                        <audio controls>
                                            <source src="audio/Project_53.mp3" type="audio/mp3">
                                        </audio>
                                        
                                    </div>
                                    <div class="track-info">Artist: Pabla officeal | Producer: Миша Томатов,DJ Pabla,Pabla officeal</div>
                                    <div class="track-name">Все хотят узнать то что я в порядке</div>
                                </li>      
                                <script>
                                    // Функция для получения данных статистики из localStorage
                                    const getUserStats = () => {
                                        const stats = localStorage.getItem('userStats');
                                        return stats ? JSON.parse(stats) : { listenedTracks: [] };
                                    };
                            
                                    // Функция для сохранения данных статистики в localStorage
                                    const saveUserStats = (stats) => {
                                        localStorage.setItem('userStats', JSON.stringify(stats));
                                    };
                            
                                    // Функция для обновления статистики
                                    const updateTrackStats = (trackName) => {
                                        const stats = getUserStats();
                                        if (!stats.listenedTracks.includes(trackName)) {
                                            stats.listenedTracks.push(trackName);
                                            saveUserStats(stats);
                                            console.log(`Track "${trackName}" added to user profile.`);
                                        } else {
                                            console.log(`Track "${trackName}" already in the profile.`);
                                        }
                                    };
                            
                                    // Слушаем окончание воспроизведения каждого трека
                                    document.querySelectorAll('audio').forEach(audio => {
                                        audio.addEventListener('ended', () => {
                                            const trackName = audio.dataset.trackName;
                                            updateTrackStats(trackName);
                                        });
                                    });

                                    document.querySelectorAll('audio').forEach((audioElement) => {
    audioElement.addEventListener('play', () => {
        window.incrementSongsPlayed();
    });
});

                            
// Выводим сохраненные прослушанные треки в консоль
const stats = getUserStats();
console.log('Listened Tracks:', stats.listenedTracks);
</script>
</body>
</html>